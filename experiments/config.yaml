# Default configuration that applies to all experiments unless overridden
defaults:
  batch_size: 128
  num_workers: 4
  pin_memory: true
  
  # Optimizer settings
  optimizer: SGD
  learning_rate: 0.1
  momentum: 0.9
  weight_decay: 0.0005  # 5e-4
  
  # Learning rate schedule
  lr_schedule: [60, 120, 160]
  lr_factor: 0.2
  
  # Data augmentation
  random_crop: true
  random_crop_padding: 4
  random_horizontal_flip: true
  normalize: true
  normalize_mean: [0.5071, 0.4867, 0.4408]  # CIFAR-100 means
  normalize_std: [0.2675, 0.2565, 0.2761]   # CIFAR-100 stds

# Output configuration
output:
  base_dir: "results"
  save_model: true
  save_frequency: 10

# Dataset-specific defaults
dataset_defaults:
  cifar100:
    epochs: 200
    batch_size: 128
    model: wrn-28-10
    depth: 28
    widen_factor: 10
    dropout_rate: 0.3
    num_classes: 100
    learning_rate: 0.1
    momentum: 0.9
    weight_decay: 0.0005  # 5e-4
    
  gtsrb:
    subset_size: 10
    epochs: 10
    learning_rate: 0.001
    
  imagenette:
    subset_size: 10
    epochs: 10
    learning_rate: 0.001

# Experiment groups
experiment_groups:
  basic_comparison:
    description: "Basic comparison of all attacks across datasets"
    experiments:
      - name: cifar100_all_attacks
        dataset: cifar100
        attacks: [pgd, ga, label_flip]
      
      - name: gtsrb_all_attacks
        dataset: gtsrb
        subset_size: 10
        attacks: [pgd, ga, label_flip]
      
      - name: imagenette_all_attacks
        dataset: imagenette
        subset_size: 10
        attacks: [pgd, ga, label_flip]

  label_flip_variants:
    description: "Different variants of label flip attacks"
    experiments:
      - name: cifar100_random_to_target
        dataset: cifar100
        attack: label_flip
        target_class: 0
      
      - name: cifar100_source_to_target
        dataset: cifar100
        attack: label_flip
        source_class: 1
        target_class: 0

  quick_test:
    description: "Quick test of result saving"
    experiments:
      - name: gtsrb_quick_test
        dataset: gtsrb
        subset_size: 5
        epochs: 1
        batch_size: 8
        attack: pgd
